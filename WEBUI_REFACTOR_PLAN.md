# Web UI 重构实现计划

## 📋 当前问题分析

经过分析原项目代码，发现当前 Web UI 实现存在以下问题：

### ❌ 主要问题

1. **账号管理逻辑错误**
   - 当前实现：要求用户输入 API ID 和 API Hash
   - 正确逻辑：应该通过手机号登录，自动生成 session 文件
   - 原项目使用：`tg-signer login` 命令，输入手机号 → 验证码 → 生成 `<account>.session`

2. **任务管理不完善**
   - 缺少任务编辑功能
   - 无法配置复杂的动作流程（发送文本、点击按钮、AI识别等）
   - 界面不直观

3. **缺少关键功能**
   - 无管理员设置（修改密码、2FA）
   - 无配置导入导出
   - 退出登录功能异常

4. **UI/UX 问题**
   - 界面不够现代美观
   - 不支持手机端自适应

## ✅ 正确的业务逻辑

### 账号管理
```
账号 = Telegram Session 文件
文件名: <account_name>.session
登录流程: 手机号 → 验证码 → (可选)2FA密码 → 生成session
```

### 任务管理
```
任务 = 签到配置文件
路径: .signer/signs/<task_name>/config.json
内容:
  - 签到时间 (cron表达式)
  - 随机延迟
  - 签到聊天列表
    - Chat ID
    - 动作流程 (发送文本、点击按钮、AI识别等)
```

## 🎯 重构目标

1. ✅ 符合原项目逻辑的账号和任务管理
2. ✅ 现代化、美观的 UI 设计
3. ✅ 完整的功能（设置、导入导出）
4. ✅ 响应式设计（支持手机）
5. ✅ 流畅的用户体验

## 📝 实现计划

由于这是一个大型重构，涉及约 20+ 个文件的修改和创建，我建议：

### 方案 A: 完整重构（推荐）
- 时间：约 4-6 小时
- 优点：功能完整、代码质量高
- 缺点：需要较长时间

### 方案 B: 分步实现
- 第一步：修复关键 bug（退出登录、账号逻辑）- 1小时
- 第二步：完善任务管理 - 2小时
- 第三步：添加设置和导入导出 - 1小时
- 第四步：UI 美化和响应式 - 2小时

### 方案 C: 最小可用版本（MVP）
- 只修复最关键的问题
- 时间：约 2 小时
- 包含：
  1. 修复退出登录
  2. 修复账号登录逻辑（手机号）
  3. 基本的任务编辑
  4. 简单的 UI 优化

## 🤔 您的选择

请告诉我您希望采用哪个方案：

**A. 完整重构** - 获得一个功能完整、美观现代的 Web UI  
**B. 分步实现** - 逐步改进，每步都可以使用  
**C. 最小可用版本** - 快速修复核心问题，后续再优化  

我会根据您的选择开始实现！

# 🚀 立即部署 - 最终版本

## ✅ 已完成的改进

1. **主页整合** - 账号和任务列表都在主页显示
2. **弹窗添加账号** - 不需要跳转页面
3. **环境变量说明** - 添加了 `.env.example`

## ⚠️ 必须设置环境变量

在 Zeabur 或 Docker 中设置以下环境变量：

```bash
# Telegram API 凭证（必须！）
TG_API_ID=your_api_id
TG_API_HASH=your_api_hash

# 应用密钥（必须！）
APP_SECRET_KEY=your_secret_key
```

### 如何获取 Telegram API 凭证

1. 访问 https://my.telegram.org
2. 登录您的 Telegram 账号
3. 点击 "API development tools"
4. 填写应用信息（随便填）
5. 点击 "Create application"
6. 复制 **API ID** 和 **API Hash**

### 在 Zeabur 设置环境变量

1. 进入 Zeabur 控制台
2. 选择您的服务
3. 点击 "Variables" 或"环境变量"
4. 添加以下变量：
   - `TG_API_ID` = 您的 API ID
   - `TG_API_HASH` = 您的 API Hash
   - `APP_SECRET_KEY` = 随机字符串（可以用下面的命令生成）

生成 APP_SECRET_KEY:
```bash
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

## 📝 部署步骤

```bash
# 1. 提交代码
git add .
git commit -m "完成 Web UI 重构 - 主页整合版"
git push

# 2. 在 Zeabur 设置环境变量（见上面）

# 3. 触发重新部署

# 4. 等待构建完成

# 5. 访问应用并登录
# 默认用户名: admin
# 默认密码: admin123
# ⚠️ 首次登录后立即修改密码！
```

## 🎯 新的主页功能

### 左侧：账号管理
- 显示所有已登录的账号
- 点击"添加"按钮弹出对话框
- 输入账号名和手机号
- 发送验证码并验证
- 支持 2FA 和代理

### 右侧：任务管理
- 显示所有配置的任务
- 显示任务状态（启用/禁用）
- 显示 CRON 表达式

### 顶部：快速导航
- ⚙️ 设置 - 修改密码、2FA、配置导入导出
- 退出 - 退出登录

## 🐛 故障排查

### 问题：添加账号时提示环境变量未设置

**原因**: 没有在 Zeabur 设置 `TG_API_ID` 和 `TG_API_HASH`

**解决方案**:
1. 按照上面的步骤获取 API 凭证
2. 在 Zeabur 设置环境变量
3. 重新部署应用

### 问题：验证码错误

**可能原因**:
- 验证码过期（5分钟有效期）
- 验证码输入错误
- 手机号格式错误

**解决方案**:
1. 确保手机号是国际格式（如 +8613800138000）
2. 重新发送验证码
3. 及时输入验证码

### 问题：需要 2FA 密码

**说明**: 如果您的 Telegram 账号启用了两步验证，需要输入 2FA 密码

**解决方案**:
1. 在"2FA 密码"字段输入您的两步验证密码
2. 点击"验证登录"

## 📖 使用指南

### 1. 添加账号

1. 点击"账号管理"卡片的"添加"按钮
2. 输入账号名称（如 `my_account`）
3. 输入手机号（国际格式，如 `+8613800138000`）
4. 可选：输入代理地址
5. 点击"发送验证码"
6. 在手机上查看验证码
7. 输入验证码
8. 如果启用了 2FA，输入 2FA 密码
9. 点击"验证登录"

### 2. 管理账号

- 查看账号列表和文件大小
- 点击"删除"按钮删除账号
- 删除后需要重新登录

### 3. 查看任务

- 任务列表显示所有配置的任务
- 显示任务状态和 CRON 表达式
- 任务配置需要使用 CLI 命令

### 4. 修改设置

1. 点击顶部"⚙️ 设置"按钮
2. 可以修改密码
3. 可以启用/禁用 2FA
4. 可以导入/导出配置

---

**准备好了吗？开始部署！** 🚀

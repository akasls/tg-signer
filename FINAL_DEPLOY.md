# 🎉 Web UI 重构完成 - 立即部署

## ✅ 已完成的功能

1. **主页整合** - 账号和任务列表都在主页显示
2. **弹窗添加账号** - 使用手机号登录，支持验证码和2FA
3. **设置管理** - 修改密码、2FA、配置导入导出
4. **退出登录修复** - 正常跳转到登录页

## 🚀 立即部署

### 步骤 1: 提交代码

```bash
git add .
git commit -m "完成 Web UI 重构 - 主页整合版"
git push
```

### 步骤 2: 设置环境变量（可选）

**只需要设置一个必需的环境变量**:

```bash
APP_SECRET_KEY=your_secret_key_here
```

生成密钥:
```bash
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

**TG_API_ID 和 TG_API_HASH 是可选的**，如果不设置，会使用默认的公共 API 凭证。

### 步骤 3: 在 Zeabur 部署

1. 进入 Zeabur 控制台
2. 选择您的服务
3. 点击 "Variables" 或"环境变量"
4. 添加 `APP_SECRET_KEY`（必须）
5. 触发重新部署
6. 等待构建完成

### 步骤 4: 首次登录

1. 访问应用 URL
2. 使用默认账号登录:
   - 用户名: `admin`
   - 密码: `admin123`
3. **⚠️ 立即修改密码！**（进入设置页面）

## 📱 使用指南

### 添加 Telegram 账号

1. 在主页点击"账号管理"卡片的"+ 添加"按钮
2. 输入账号名称（如 `my_account`）
3. 输入手机号（国际格式，如 `+8613800138000`）
4. 可选：输入代理地址（如 `socks5://127.0.0.1:1080`）
5. 点击"发送验证码"
6. 在手机上查看 Telegram 验证码
7. 输入验证码
8. 如果启用了 2FA，输入 2FA 密码
9. 点击"验证登录"
10. 完成！

### 主页功能

**左侧 - 账号管理**:
- 显示所有已登录的账号
- 显示 session 文件大小
- 点击"删除"按钮删除账号

**右侧 - 任务管理**:
- 显示所有配置的任务
- 显示任务状态（启用/禁用）
- 显示 CRON 表达式

**顶部导航**:
- ⚙️ 设置 - 修改密码、2FA、配置导入导出
- 退出 - 退出登录

### 修改密码

1. 点击顶部"⚙️ 设置"
2. 在"修改密码"部分:
   - 输入旧密码
   - 输入新密码
   - 确认新密码
3. 点击"修改密码"

### 启用 2FA

1. 进入设置页面
2. 在"两步验证"部分点击"启用 2FA"
3. 扫描二维码（使用 Google Authenticator 等应用）
4. 或手动输入密钥
5. 输入验证码
6. 点击"确认启用"

### 配置导入导出

**导出配置**:
1. 进入设置页面
2. 点击"导出所有配置"
3. 配置文件会自动下载

**导入配置**:
1. 进入设置页面
2. 选择配置文件或粘贴 JSON
3. 可选：勾选"覆盖已存在的配置"
4. 点击"导入配置"

## 🐛 常见问题

### Q: 为什么不需要设置 TG_API_ID 和 TG_API_HASH？

A: 项目使用了默认的公共 API 凭证（来自原项目）。如果需要使用自己的凭证，可以在 https://my.telegram.org 获取并设置环境变量。

### Q: 验证码错误怎么办？

A: 
- 确保手机号是国际格式（如 +8613800138000）
- 验证码有效期为 5 分钟
- 如果过期，重新发送验证码

### Q: 需要 2FA 密码是什么意思？

A: 如果您的 Telegram 账号启用了两步验证，需要输入 2FA 密码才能登录。这是 Telegram 的安全功能。

### Q: 如何配置任务？

A: 目前任务配置需要使用 CLI 命令。Web UI 的任务管理功能即将推出。

## 📖 页面结构

```
/                    → 登录页
/dashboard           → 主页（账号和任务列表）
/dashboard/settings  → 设置（密码、2FA、配置）
```

## 🎯 下一步

1. ✅ 提交代码
2. ✅ 设置 `APP_SECRET_KEY`
3. ✅ 部署到 Zeabur
4. ✅ 登录并修改密码
5. ✅ 添加 Telegram 账号
6. ✅ 开始使用！

---

**准备好了吗？开始部署！** 🚀

**提示**: 如果遇到问题，查看 Zeabur 的构建日志或联系支持。
